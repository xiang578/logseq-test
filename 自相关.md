---
title: 自相关
alias:
  - autocorrelation
  - ACF
public: true
tags:
  - Mathematics
date: 2024-10-05
updated: 2025-03-11
toc: true
mathjax: true
---

缩写 :->  ACF


```python
# https://github.com/Arturus/kaggle-web-traffic/blob/master/make_features.py#L88
def single_autocorr(series, lag):
  """
  Autocorrelation for single data series
  :param series: traffic series
  :param lag: lag, days
  :return:
  """
  s1 = series[lag:]
  s2 = series[:-lag]
  ms1 = np.mean(s1)
  ms2 = np.mean(s2)
  ds1 = s1 - ms1
  ds2 = s2 - ms2
  divider = np.sqrt(np.sum(ds1 * ds1)) * np.sqrt(np.sum(ds2 * ds2))
  return np.sum(ds1 * ds2) / divider if divider != 0 else 0
```

$$R_{k}=\frac{\sum_{i=1}^{n-k}\left(X_{i}-\bar{X}\right)\left(X_{i+k}-\bar{X}\right)}{\sum_{i=1}^{n}\left(X_{i}-\bar{X}\right)^{2}}$$

  + 取值范围 -1 到 1，越大越相关

  + 比如一个序列长度是 L，如果具有周期性且周期性为 t，那么子序列 `0:L-1-t` 和 子序列 `t:L-1` 的相关性是最大的

Ref

  + [如何理解信号处理中自相关函数的意义？ - 知乎 (zhihu.com)](https://www.zhihu.com/question/29431374)

  + [自相关的物理意义? - 知乎 (zhihu.com)](https://www.zhihu.com/question/34051919)
